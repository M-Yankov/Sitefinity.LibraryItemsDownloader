function OnMasterViewLoadedCustom(n,t){libraryDownloader.masterViewLoaded(n,t)}var libraryDownloader=function(){function f(r){n=r.get_binder();i=r.get_element();t=r.get_titleText().trim();t=c(t);var u=r.get_currentItemsList();u.add_command(s)}function e(){$(i).find(r).show()}function o(){$(i).find(r).hide()}function s(i,r){var s=r.get_commandName(),f,c,l,v;u[s]&&(f=n.get_selectedItems(),(!f||f.length<1)&&alert("Please select items!"),c=f.map(function(n){return{Id:n.Id,IsFolder:n.IsFolder}}),e(),l=JSON.stringify(c),v="/LibrariesService/"+u[s].downloadLink,$.ajax({method:"POST",url:v,data:l,dataType:"json",contentType:"application/json",success:function(n){a(n,t)},error:function(n){console.error(n)},complete:function(){o();h()}}))}function h(){Telerik.Sitefinity.Web.UI.RadListViewBinder&&n instanceof Telerik.Sitefinity.Web.UI.RadListViewBinder?n.deselectAll():Telerik.Sitefinity.Web.UI.RadGridBinder&&n instanceof Telerik.Sitefinity.Web.UI.RadGridBinder&&n.clearSelection()}function c(n){var t=document.createElement("textarea");return t.innerHTML=n,t.value}function l(n){for(var f,i=window.atob(n),r=i.length,u=new Uint8Array(r),t=0;t<r;t++)f=i.charCodeAt(t),u[t]=f;return u}function a(n,t){var u=l(n),f=new Blob([u],{type:"application/zip"}),i=document.createElement("a"),r;i.href=window.URL.createObjectURL(f);r=t+".zip";i.download=r;i.click()}var n,t,i,r=".RadAjax",u={DownloadSelectedImages:{downloadLink:"DownloadImages"},DownloadSelectedDocuments:{downloadLink:"DownloadDocuments"},DownloadSelectedVideos:{downloadLink:"DownloadVideos"}};return{masterViewLoaded:f}}();